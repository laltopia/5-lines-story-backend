function escapeHtml(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}async function loadUsers(){const e=document.getElementById("usersList");e.innerHTML='<p class="loading">Carregando usuarios...</p>';try{const s=await window.Clerk.session.getToken(),t=await fetch("/api/users",{headers:{Authorization:`Bearer ${s}`}}),n=await t.json();n.success&&n.users.length>0?e.innerHTML=n.users.map(e=>`\n        <div class="user-item">\n          <h3>${escapeHtml(e.name)}</h3>\n          <p>üìß ${escapeHtml(e.email)}</p>\n          <p style="font-size: 0.8rem; color: #999;">\n            Criado em: ${new Date(e.created_at).toLocaleDateString("pt-BR")}\n          </p>\n        </div>\n      `).join(""):e.innerHTML='<p class="loading">Nenhum usuario encontrado.</p>'}catch(s){e.innerHTML='<p class="loading">Erro ao carregar usuarios.</p>'}}function showResult(e,s){const t=document.getElementById("result");t.className="show "+e,t.innerHTML=s,setTimeout(()=>{t.classList.remove("show")},5e3)}document.addEventListener("DOMContentLoaded",()=>{loadUsers()}),document.getElementById("userForm").addEventListener("submit",async e=>{e.preventDefault();const s=document.getElementById("name").value,t=document.getElementById("email").value;document.getElementById("result");try{const e=await window.Clerk.session.getToken(),n=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({name:s,email:t})}),a=await n.json();a.success?(showResult("success","‚úÖ Usuario criado com sucesso: "+escapeHtml(a.user.name)),document.getElementById("userForm").reset(),loadUsers()):showResult("error","‚ùå Erro: "+escapeHtml(a.error))}catch(e){showResult("error","‚ùå Erro: "+escapeHtml(e.message))}});